@model TicketListViewModel

<div class="card filter-card mb-4">
    <div class="card-body">
        <form method="get" class="row g-3 align-items-end" data-disable-on-submit>
            <div class="col-lg-4">
                <label class="form-label">Search</label>
                <input class="form-control" type="text" name="search" value="@Model.Search" placeholder="Search by ticket ID or title" />
            </div>
            <div class="col-lg-2 col-md-4">
                <label class="form-label">Status</label>
                <select class="form-select" name="status">
                    <option value="">All</option>
                    @foreach (var status in Model.Statuses)
                    {
                        <option value="@status.Value" selected="@(status.Value == Model.Status?.ToString())">@status.Text</option>
                    }
                </select>
            </div>
            <div class="col-lg-2 col-md-4">
                <label class="form-label">Priority</label>
                <select class="form-select" name="priority">
                    <option value="">All</option>
                    @foreach (var priority in Model.Priorities)
                    {
                        <option value="@priority.Value" selected="@(priority.Value == Model.Priority?.ToString())">@priority.Text</option>
                    }
                </select>
            </div>
            <div class="col-lg-2 col-md-4">
                <label class="form-label">Category</label>
                <select class="form-select" name="categoryId">
                    <option value="">All</option>
                    @foreach (var category in Model.Categories)
                    {
                        <option value="@category.Value" selected="@(category.Value == Model.CategoryId?.ToString())">@category.Text</option>
                    }
                </select>
            </div>
            <div class="col-lg-2 col-md-4">
                <label class="form-label">SLA</label>
                <select class="form-select" name="sla">
                    <option value="">All</option>
                    <option value="ontrack" selected="@(Model.Sla == "ontrack")">On Track</option>
                    <option value="due" selected="@(Model.Sla == "due")">Due Soon</option>
                    <option value="overdue" selected="@(Model.Sla == "overdue")">Overdue</option>
                </select>
            </div>
            @if (User.IsInRole(RoleNames.Admin))
            {
                <div class="col-lg-2 col-md-4">
                    <label class="form-label">Assigned</label>
                    <select class="form-select" name="assignedAdminUserId">
                        <option value="">All</option>
                        <option value="unassigned" selected="@(Model.AssignedAdminUserId == "unassigned")">Unassigned</option>
                        @foreach (var admin in Model.Admins)
                        {
                            <option value="@admin.Value" selected="@(admin.Value == Model.AssignedAdminUserId)">@admin.Text</option>
                        }
                    </select>
                </div>
            }
            <div class="col-12 d-flex flex-wrap gap-2">
                <button class="btn btn-primary" type="submit" data-loading-text="Filtering...">Apply Filters</button>
                <a class="btn btn-outline-secondary" asp-action="Index">Clear Filters</a>
            </div>
        </form>
    </div>
</div>
